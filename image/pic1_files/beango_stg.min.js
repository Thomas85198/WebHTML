!function(e,t,o,a,n,r,i){e.GoogleAnalyticsObject=n,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,r=t.createElement(o),i=t.getElementsByTagName(o)[0],r.async=1,r.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(r,i)}(window,document,"script",0,"ga"),ga("create","UA-109448979-2","auto");var trackKey="UA-109448979-2",trekWhiteList=["whether_accept_auth_or_not","is_widget_pin","pin_widget","open_widget","get_me_userid","get_me_chatid","send_message","get_available_user_chatid","send_message_to_current_room","get_me_openid_access_token","leave_extension","scan_qr_code","get_3rd_oauth","get_current_room_users_openid","get_cropped_image","send_data_to_apps","get_me_location","force_reload_page","redirect_uri_by_default_browser","get_me_profile","deeplink_jump","get_current_room_users_info","get_me_personalization","share_interactive_message","share_interactive_message_v2","get_me_openid","share_interactive_msg_to_friends","system_msg_change"],deleteAtrList=["callback"];function createBGO(){function i(o){var e,t,a=(e=1e6,t=9999999,"beango"+(Math.floor(Math.random()*(t-e+1))+e));return window[a]=function(e){var t=JSON.parse(e);o(t),delete window[a]},a}function n(e){console.log(JSON.stringify(e))}function s(e,t,o){var a={};if(a.userId=_,-1<trekWhiteList.indexOf(e)&&o){for(var n in o)if("params"===n){for(var r in o[n])-1<deleteAtrList.indexOf(r)&&delete o[n][r];break}a.data=o}a=JSON.stringify(a),function(e){if("3"===trackKey[trackKey.length-1]){new Date;var t="https://tkportal.aotter.net/tr?"+function(e){var t="";for(var o in e)t+=o+"="+encodeURI(e[o]||"")+"&";return t}(e),o=new XMLHttpRequest;o.onreadystatechange=function(){4==this.readyState&&this.status},o.open("GET",t,!0),o.send()}var a=e.cd2,n=e.cd3;ga("send","event",a,l,n)}({ev:"PageView",cid:"HEbnXb6ZmVQkowetz9EU",cu:_,cd1:t,cd2:e,cd3:a})}var _=null,p=!0;function r(t,e){try{var o=t.type;if(p)p=!1,d({type:"get_me_userid",params:{callback:i((a=o,n=l,r=t,function(e){if(!e.error&&e.user_id)_=e.user_id;else{var t=e.error?e.error:JSON.stringify(e);ga("send","event","Error",n,JSON.stringify({error:"trek task error.",json:r,info:t,userId:_,trackKey:trackKey}))}s(a,n,r)}))}},e);else s(o,l,t)}catch(e){ga("send","event","Error",l,JSON.stringify({error:"trek task error.",json:t,info:e,userId:_,trackKey:trackKey}))}var a,n,r}function c(e,t){var o,a;t||(t=n),r(JSON.parse(JSON.stringify(e)),t),d(e,(o=e,a=t,function(e){e.hasOwnProperty("error")&&ga("send","event","Error",l,JSON.stringify({error:"callback error",json:o,userId:_,callback:e})),a(e)}))}function d(e,t){var o,a=(o=navigator.userAgent||navigator.vendor||window.opera,/iPhone|iPad|iPod/i.test(o)?"iOS":/Android/i.test(o)?"Android":"unknown"),n=navigator.userAgent;if(/BeanGo/.test(n))if("iOS"===a)if(window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.beango)try{window.webkit.messageHandlers.beango.postMessage(e)}catch(e){return void t({error:401,message:JSON.stringify(e)})}else t({error:404,message:"beango not exist"});else if("Android"===a)if(window.beango)try{window.beango.postMessage(JSON.stringify(e))}catch(e){return void t({error:401,message:JSON.stringify(e)})}else t({error:404,message:"beango not exist"});else t({error:404,message:"device not support"});else t({error:404,message:"Not BeanGo user agent"})}function e(){this.options={token:""},this.whether_accept_auth_or_not=function(e,t){c({type:"whether_accept_auth_or_not",params:{client_id:e,accept:t}})},this.is_widget_pin=function(e,t){var o;o=e,c({type:"is_widget_pin",params:{callback:i(t),widget_id:o}})},this.pin_widget=function(e,t){var o;o=e,c({type:"pin_widget",params:{callback:i(t),widget:o}})},this.open_widget=function(e){c({type:"open_widget",params:{widget_id:e}})}}var l="";return e.prototype.init=function(e){!function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])}(this.options,e),l=this.options.official_account_id},e.prototype.get_me_userid=function(e){c({type:"get_me_userid",params:{callback:i(e)}},e)},e.prototype.get_me_chatid=function(e){c({type:"get_me_chatid",params:{callback:i(e),token:this.options.token}},e)},e.prototype.send_message=function(e,t,o){e.hasOwnProperty("info")&&(e.info.official_account_id=this.options.official_account_id),c({type:"send_message",params:{callback:i(o),token:this.options.token,request_id:(new Date).getTime().toString(),friends_only:t,msg_body:e}},o)},e.prototype.get_avaliable_user_chatid=function(e){c({type:"get_available_user_chatid",params:{callback:i(e),token:this.options.token}},e)},e.prototype.send_message_to_current_room=function(e,t){e.hasOwnProperty("info")&&(e.info.official_account_id=this.options.official_account_id),c({type:"send_message_to_current_room",params:{callback:i(t),token:this.options.token,request_id:(new Date).getTime().toString(),msg_body:e}},t)},e.prototype.get_me_openid_access_token=function(e,t,o){c({type:"get_me_openid_access_token",params:{callback:i(o),token:this.options.token,client_id:e,redirect_uri:t}},o)},e.prototype.leave_extension=function(){c({type:"leave_extension"})},e.prototype.scan_qr_code=function(e,t){c({type:"scan_qr_code",params:{callback:i(t),style:e}},t)},e.prototype.redirect_uri_by_default_browser=function(e){c({type:"redirect_uri_by_default_browser",params:{uri:e}})},e.prototype.get_3rd_oauth=function(e,t){c({type:"get_3rd_oauth",params:{service:e,callback:i(t),token:this.options.token}},t)},e.prototype.get_current_room_users_openid=function(e){c({type:"get_current_room_users_openid",params:{callback:i(e),token:this.options.token}},e)},e.prototype.get_cropped_image=function(e,t){c({type:"get_cropped_image",params:{callback:i(t),crop_type:e}},t)},e.prototype.send_data_to_apps=function(e){c({type:"send_data_to_apps",params:e})},e.prototype.get_me_location=function(e){c({type:"get_me_location",params:{callback:i(e)}},e)},e.prototype.force_reload_page=function(){c({type:"force_reload_page"})},e.prototype.send_data_via_broadcast=function(e,t){var o=i(t);c({type:"send_data_via_broadcast",params:{token:this.options.token,param:e,callback:o}},t)},e.prototype.send_data_via_deeplink=function(e,t){var o=i(t);c({type:"send_data_via_deeplink",params:{token:this.options.token,deep_link:e,callback:o}},t)},e.prototype.redirect_url_and_clear_history=function(e){c({type:"redirect_url_and_clear_history",params:{url:e}})},e.prototype.open_h5_widget=function(e,t){c({type:"open_h5_widget",params:{target_official_account_id:e,url:t}})},e.prototype.third_party_pay=function(e,t){var o=i(t);c({type:"third_party_pay",params:{token:this.options.token,third_party_name:e.third_party_name,third_party_param:e.third_party_param,callback:o}},t)},e.prototype.get_friends_openid=function(e){var t=i(e);c({type:"get_friends_openid",params:{token:this.options.token,callback:t}},e)},e.prototype.get_multiple_cropped_image=function(e,t,o){c({type:"get_multiple_cropped_image",params:{crop_type:e,callback:i(t),max_selection_count:o}},t)},e.prototype.scan=function(e,t){c({type:"scan",params:{callback:i(t),title:e.title,url:e.url,scanType:e.scanType,cameraPercentage:e.cameraPercentage}},t)},e.prototype.get_multiple_cropped_image_type=function(e,t,o,a){c({type:"get_multiple_cropped_image_type",params:{crop_type:e,callback:i(t),max_selection_count:o,action:a}},t)},e.prototype.get_me_profile=function(e){c({type:"get_me_profile",params:{callback:i(e),token:this.options.token}},e)},e.prototype.deeplink_jump=function(e,t){c({type:"deeplink_jump",params:{deeplink:e,leave_webview:t,token:this.options.token}})},e.prototype.get_current_room_users_info=function(e){c({type:"get_current_room_users_info",params:{callback:i(e),token:this.options.token}},e)},e.prototype.get_me_personalization=function(e){c({type:"get_me_personalization",params:{callback:i(e),token:this.options.token}},e)},e.prototype.share_interactive_message=function(e,t,o){c({type:"share_interactive_message",params:{msg_body:e,select_opt:t,callback:i(o),token:this.options.token}},o)},e.prototype.share_interactive_message_v2=function(e,t,o){c({type:"share_interactive_message_v2",params:{msg_body:e,select_opt:t,callback:i(o),token:this.options.token}},o)},e.prototype.get_me_openid=function(e){c({type:"get_me_openid",params:{callback:i(e),token:this.options.token}},e)},e.prototype.share_interactive_msg_to_friends=function(e,t,o){c({type:"share_interactive_msg_to_friends",params:{callback:i(o),token:this.options.token,select_opt:t,msg_body:e}})},e.prototype.system_msg_change=function(e,t){c({type:"system_msg_change",params:{callback:i(t),data:e}},t)},e.prototype.get_default_user_address=function(e){c({type:"get_default_user_address",params:{callback:i(e),token:this.options.token}},e)},e.prototype.show_user_address_list=function(e){c({type:"show_user_address_list",params:{callback:i(e),token:this.options.token}},e)},e.prototype.get_bf_personalization=function(e){c({type:"get_bf_personalization",params:{callback:i(e),token:this.options.token,oaid:this.options.official_account_id}},e)},e.prototype.post_bf_personalization=function(e,t){c({type:"post_bf_personalization",params:{callback:i(t),token:this.options.token,oaid:this.options.official_account_id,data:e}},t)},e.prototype.get_me_profile_base_on_signature=function(e,t,o,a){c({type:"get_me_profile_base_on_signature",params:{callback:i(a),domain:e,timestamp:t,signature:o}},a)},e.prototype.set_notification_count=function(e){c({type:"set_notification_count",params:{token:this.options.token,oaid:this.options.official_account_id,count:e}})},new e}window.BGO=createBGO();